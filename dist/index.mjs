var t=new class{elements;observer;rafID=null;queue=[];resizePrecisionPower=1;constructor(){this.elements=null,this.observer=null}onElementResize(t){this.queue.push(...t),this.rafID||(this.rafID=requestAnimationFrame(()=>this.flushQueue()))}flushQueue(){const t=new Map;for(const e of this.queue)t.set(e.target,e);this.queue=[],t.forEach((t,e)=>{if(!e.isConnected)return void this.unobserve(e);const r=this.elements?.get(e);if(!r)return;let{inlineSize:i,blockSize:n}=t.borderBoxSize[0];r.cornerOptions.isRounded&&(i=Math.round(i),n=Math.round(n));const{previousW:s,previousH:o,draw:a,onResize:h}=r;s===i&&o===n||(a?.({width:i,height:n}),h?.({width:i,height:n},t.target),r.previousW=i,r.previousH=n)}),this.rafID=null}getDrawOptions=t=>this.elements?.get(t)?.cornerOptions??null;setCornerOptions(t,e){const r=this.elements?.get(t);r&&(r.cornerOptions=e,this.elements?.set(t,r))}addElement(t,e,r){this.elements||(this.elements=new Map),this.observer||(this.observer=new ResizeObserver(t=>this.onElementResize(t))),this.unobserve(t);const{observe:i=!0,onResize:n}=e;if(i){const i=null,s=null;this.elements.set(t,{draw:r,cornerOptions:e,onResize:n,previousW:i,previousH:s,element:t}),this.observer.observe(t)}return r}draw(t,e){const run=t=>{if(!t.element.isConnected)return;let{previousW:e,previousH:r}=t;null!==e&&null!==r||(e=t.element.offsetWidth,r=t.element.offsetHeight,t.previousW=e,t.previousH=r),t.draw?.({width:e,height:r})};if(t){e&&this.setCornerOptions(t,e);const r=this.elements?.get(t);r&&run(r)}else this.elements?.forEach(run)}unobserve(t){const funk=t=>{this.observer?.unobserve(t),this.elements?.delete(t)};t?funk(t):this.elements?.keys().forEach(t=>funk(t))}};function createSquircleCorner(t,e,r,i,n,s,o,a){if(r){const a=[];return t&&a.push(["c",...i]),n&&a.push(["a",r,r,0,0,e,...s.map(t=>t*n)]),t&&a.push(["c",...o]),a}return[["l",...a]]}const createPath$6=({width:t,height:e,radii:r,offsets:i,smoothing:n=1,preserveSmoothing:s=!0,sweepFlag:o=1})=>{const[a,,,h]=i,[c,l,u,f]=r.map(r=>function(t,e,r,i){let n=(1+e)*t;r||(e=Math.min(e,i/t-1),n=Math.min(n,i));const s=.5*Math.PI*(1-e),o=Math.sin(s/2)*t*2**.5,a=.25*Math.PI*e,h=t*Math.tan(.25*(.5*Math.PI-s))*Math.cos(a),c=h*Math.tan(a);let l=(n-o-h-c)/3,u=2*l;if(r&&n>i){const t=i-c-o-h,e=t-t/6;l=Math.min(l,e),u=t-l,n=Math.min(n,i)}return{a:u,b:l,c:h,d:c,p:n,arcLength:o,radius:t,ab:u+l,bc:l+h,abc:u+l+h}}(r,n,s,Math.max(r,.5*Math.min(t,e))));return[["M",t-l.p+h,a],...createSquircleCorner(n,o,l.radius,[l.a,0,l.ab,0,l.abc,l.d],l.arcLength,[1,1],[l.d,l.c,l.d,l.bc,l.d,l.abc],[l.p,0]),["L",t+h,e-u.p+a],...createSquircleCorner(n,o,u.radius,[0,u.a,0,u.ab,-u.d,u.abc],u.arcLength,[-1,1],[-u.c,u.d,-u.bc,u.d,-u.abc,u.d],[0,u.p]),["L",f.p+h,e+a],...createSquircleCorner(n,o,f.radius,[-f.a,0,-f.ab,0,-f.abc,-f.d],f.arcLength,[-1,-1],[-f.d,-f.c,-f.d,-f.bc,-f.d,-f.abc],[-f.p,0]),["L",h,c.p+a],...createSquircleCorner(n,o,c.radius,[0,-c.a,0,-c.ab,c.d,-c.abc],c.arcLength,[1,-1],[c.c,-c.d,c.bc,-c.d,c.abc,-c.d],[0,-c.p]),["Z"]]},createPath$5=t=>createPath$6({...t,preserveSmoothing:!1,sweepFlag:1}),createPath$4=({width:t,height:e,radii:r,offsets:i})=>{const[n,,,s]=i,[o,a,h,c]=r;return[["M",s+o,n],["L",t-a+s,n],["L",t+s,n+a],["L",t+s,e-h+n],["L",t-h+s,e+n],["L",s+c,e+n],["L",s,e-c+n],["L",s,n+o],["Z"]]},createPath$3=({width:t,height:e,radii:r,offsets:i})=>{const[n,,,s]=i,[o,a,h,c]=r;return[["M",s+c,n],["L",t-a+s,n],["L",t-a+s,n+a],["L",t+s,n+a],["L",t+s,e-h+n],["L",t-h+s,e-h+n],["L",t-h+s,e+n],["L",s+c,e+n],["L",s+c,e-c+n],["L",s,e-c+n],["L",s,n+o],["L",s+o,n+o],["L",s+o,n],["Z"]]},createPath$2=t=>createPath$6({...t,smoothing:0,preserveSmoothing:!1,sweepFlag:1}),createPath$1=t=>createPath$6({...t,smoothing:0,preserveSmoothing:!1,sweepFlag:0}),fix=t=>{const e=10**t;return t=>Math.round(t*e)/e};function createGradient({id:t,angle:e,colors:r,precision:i}){const n=fix(i),s=e*(Math.PI/180),o=Math.sin(s),a=-Math.cos(s),h=(o>=0?1:0)-.5,c=(a>=0?1:0)-.5,l=Math.abs(h*o+c*a);return`<linearGradient id="${t}" x1="${n(.5-l*o)}" y1="${n(.5-l*a)}"  x2="${n(.5+l*o)}" y2="${n(.5+l*a)}" gradientUnits="objectBoundingBox">${function(t,e){const r=fix(e),i=t.map(t=>{const e=t.trim().split(/\s+/),r=e[0];let i=null;if(e.length>1){const t=e[1];i=t.includes("%")?parseFloat(t)/100:parseFloat(t)}return{color:r,val:i}}),n=i.length;null===i[0].val&&(i[0].val=0),null===i[n-1].val&&(i[n-1].val=1);let s=0;for(;s<n-1;){let t=s+1;for(;t<n&&null===i[t].val;)t++;if(t>s+1){const e=i[s].val,r=t-s,n=(i[t].val-e)/r;for(let t=1;t<r;t++)i[s+t].val=e+n*t}s=t}return i.map(t=>`<stop offset="${r(t.val)}" stop-color="${t.color}" />`).join("")}(r,i)}</linearGradient>`}const e=/[\r\n"%#()<>?[\\\]^`{|}\s']/g,r={"\r":"","\n":""};function createPath({width:t=0,height:e=0,borderRadius:r=0,offset:i=0,smoothing:n=1,cornerType:s=createPath$6,precision:o=3,isArray:a=!1}){if(!t||!e)return a?[]:"";const h=Array.isArray(i)?i:[i,i,i,i],[c,l,u,f]=h,d=t-f-l,p=e-c-u;let g,w;if(Array.isArray(r)){const t=r.map((t,e)=>t+r[(e+1)%4]),e=Math.min(...t.map((t,e)=>(e%2==0?d:p)/t));g=e<1?r.map(t=>t*e):r}else g=[r,r,r,r].map((t,e)=>Math.max(0,Math.min(t-h[e],.5*Math.min(d,p))));w=s?s({width:d,height:p,radii:g,offsets:h,smoothing:n}):[[]];const M=fix(o);if(a)return w.filter(t=>t[0]).map(([t,...e])=>[t,...e.map(t=>"number"==typeof t?M(t):t)]);let $="";for(let t=0;t<w.length;t++){const e=w[t];if(e[0]){$+=e[0];for(let t=1;t<e.length;t++){const r=e[t];$+=("number"==typeof r?M(r):r)+" "}}}return $.trim()}function addCorners(i,n){t.setCornerOptions(i,n);const drawFunk=n=>{const s=t.getDrawOptions(i)??{},o={...s,...n};o.isRounded&&(o.width=o.width?Math.round(o.width):void 0,o.height=o.height?Math.round(o.height):void 0),o.width&&o.height&&(i.style.clipPath=s.clip?`path('${createPath(o)}')`:"",(s.background||s.border)&&(i.style.backgroundImage=function(t){const{border:i=[],offset:n=0,strokeDrawType:s=0,background:o,clip:a,idPrefix:h="m",width:c,height:l,precision:u=3}=t,f=[],d=Array.isArray(i?.[0])?i:[i],p=Array.isArray(n)?n:[n,n,n,n],g=a?null:createPath(t);let w;if(d?.length){let e=0;const r=[];for(let i=0;i<d.length;i++)if("number"==typeof d[i][1]){const[o,a,c]=d[i];if(o){const l=`${h}g${i}`;w||(w=[]),w.push(createGradient({id:l,angle:a,colors:c,precision:u}));const f=0===s?2*(e+o):o;r.push(`<path d="${createPath({...t,offset:0===s?n:p.map(t=>t+e+.5*o)})}" fill="none" stroke="url(#${l})" stroke-width="${f}" />`),e+=o}}else{const[o,a]=d[i];if(o){const i=0===s?2*(e+o):o;r.push(`<path d="${createPath({...t,offset:0===s?n:p.map(t=>t+e+.5*o)})}" fill="none" stroke="${a}" stroke-width="${i}" />`),e+=o}}o&&(a?f.push(`<rect width="${c}" height="${l}" fill="${o}" />`):f.push(`<path d="${g}" fill="${o}" />`)),f.push(...r.reverse())}return f.length?(({paths:t,gradients:i,clipPath:n,idPrefix:s})=>{const o=`${s}c`,a=[],h=[];return i&&i.forEach(t=>{a.push(t)}),n&&a.push(`<clipPath id="${o}"><path d="${n}" /></clipPath>`),a.length&&h.push(`<defs>${a.join("")}</defs>`),n?h.push(`<g clip-path="url(#${o})">${t.join("")}</g>`):h.push(...t),`url('data:image/svg+xml,${(t=>t.replace(e,t=>r[t]??(r[t]=`%${t.charCodeAt(0).toString(16).toUpperCase()}`)))((c=h.join(""),`<svg xmlns="http://www.w3.org/2000/svg">${c}</svg>`))}')`;var c})({paths:f,clipPath:g,gradients:w,idPrefix:h}):"none"}(o)))};return drawFunk(),t.addElement(i,n,drawFunk)}function draw(e,r){t.draw(e,r)}function unobserve(e){t.unobserve(e)}export{createPath$5 as FigmaSquircle,createPath$4 as Flat,createPath$3 as Inset,createPath$2 as Round,createPath$1 as RoundInverse,createPath$6 as Squircle,addCorners,createPath,draw,unobserve};
