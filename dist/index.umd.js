!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).monoco={})}(this,(function(e){"use strict";function t(e,t,r,n,i,s){return e?[["c",...t],r?["a",e,e,0,0,1,...n.map((e=>e*r))]:[],["c",...i]]:[["l",...s]]}var r,n=new class{elements;observer;constructor(){this.elements=null,this.observer=null}onElementResize(e){for(const t of e){const e=t.target.getBoundingClientRect(),r=this.elements?.get(t.target);if(!r)continue;const{previousW:n,previousH:i,draw:s,onResize:o}=r;n===e.width&&i===e.height||(s?.({width:e.width,height:e.height}),o?.(e,t.target),r.previousW=e.width,r.previousH=e.height)}}getDrawOptions(e){return this.elements?.get(e)?.cornerOptions??null}setCornerOptions(e,t){const r=this.elements?.get(e);r&&(r.cornerOptions=t,this.elements?.set(e,r))}addElement(e,t,r){this.elements||(this.elements=new Map),this.observer||(this.observer=new ResizeObserver((e=>this.onElementResize(e)))),this.unobserve(e);const{observe:n=!0,onResize:i}=t;if(n){this.observer.observe(e);const n=null,s=null;this.elements.set(e,{draw:r,cornerOptions:t,onResize:i,previousW:n,previousH:s,element:e})}return r}draw(e,t){e?(t&&this.setCornerOptions(e,t),this.elements?.get(e)?.draw?.()):this.elements?.forEach((e=>e.draw?.()))}unobserve(e){const t=t=>{this.observer?.unobserve(e),this.elements?.delete(e)};e?t():this.elements?.keys().forEach((e=>t()))}};function i({width:r=0,height:n=0,smoothing:i=1,radius:s=0,offset:o=0,type:a=e.CornerType.Squircle,precision:h=3,isArray:c=!1}){if(!r||!n)return c?[]:"";const d=a===e.CornerType.Squircle,l=a===e.CornerType.RoundInverse?0:1,u=Array.isArray(o)?o:[o,o,o,o],[p,g,f,m]=u,b=r-m-g,w=n-p-f,v=.5*Math.min(b,w),y=(Array.isArray(s)?s:[s,s,s,s]).map(((e,t)=>Math.max(0,Math.min(e-u[t],v))));let L;switch(a){case e.CornerType.Round:case e.CornerType.RoundInverse:L=L=function({width:e,height:t,radii:r,offsets:n,sweepFlag:i}){const[s,,,o]=n,[a,h,c,d]=r;return[["M",o+d,s],["L",e-h+o,s],["A",h,h,0,0,i,e+o,s+h],["L",e+o,t-c+s],["A",c,c,0,0,i,e-c+o,t+s],["L",o+d,t+s],["A",d,d,0,0,i,o,t-d+s],["L",o,s+a],["A",a,a,0,0,i,o+a,s],["Z"]]}({width:b,height:w,radii:y,offsets:u,sweepFlag:l});break;case e.CornerType.Flat:L=L=function({width:e,height:t,radii:r,offsets:n}){const[i,,,s]=n,[o,a,h,c]=r;return[["M",s+o,i],["L",e-a+s,i],["L",e+s,i+a],["L",e+s,t-h+i],["L",e-h+s,t+i],["L",s+c,t+i],["L",s,t-c+i],["L",s,i+o],["Z"]]}({width:b,height:w,radii:y,offsets:u});break;case e.CornerType.Inset:L=L=function({width:e,height:t,radii:r,offsets:n}){const[i,,,s]=n,[o,a,h,c]=r;return[["M",s+c,i],["L",e-a+s,i],["L",e-a+s,i+a],["L",e+s,i+a],["L",e+s,t-h+i],["L",e-h+s,t-h+i],["L",e-h+s,t+i],["L",s+c,t+i],["L",s+c,t-c+i],["L",s,t-c+i],["L",s,i+o],["L",s+o,i+o],["L",s+o,i],["Z"]]}({width:b,height:w,radii:y,offsets:u});break;case e.CornerType.Squircle:case e.CornerType.FigmaSquircle:default:L=function({width:e,height:r,smoothing:n,radii:i,offsets:s,preserveSmoothing:o}){const[a,,,h]=s,[c,d,l,u]=i.map((t=>function(e,t,r,n){let i=(1+t)*e;r||(t=Math.min(t,n/e-1),i=Math.min(i,n));const s=.5*Math.PI*(1-t),o=Math.sin(s/2)*e*2**.5,a=.25*Math.PI*t,h=e*Math.tan(.25*(.5*Math.PI-s))*Math.cos(a),c=h*Math.tan(a);let d=(i-o-h-c)/3,l=2*d;if(r&&i>n){const e=n-c-o-h,t=e-e/6;d=Math.min(d,t),l=e-d,i=Math.min(i,n)}return{a:l,b:d,c:h,d:c,p:i,arcLength:o,radius:e,ab:l+d,bc:d+h,abc:l+d+h}}(t,n,o,.5*Math.min(e,r))));return[["M",e-d.p+h,a],...t(d.radius,[d.a,0,d.ab,0,d.abc,d.d],d.arcLength,[1,1],[d.d,d.c,d.d,d.bc,d.d,d.abc],[d.p,0]),["L",e+h,r-l.p+a],...t(l.radius,[0,l.a,0,l.ab,-l.d,l.abc],l.arcLength,[-1,1],[-l.c,l.d,-l.bc,l.d,-l.abc,l.d],[0,l.p]),["L",u.p+h,r+a],...t(u.radius,[-u.a,0,-u.ab,0,-u.abc,-u.d],u.arcLength,[-1,-1],[-u.d,-u.c,-u.d,-u.bc,-u.d,-u.abc],[-u.p,0]),["L",h,c.p+a],...t(c.radius,[0,-c.a,0,-c.ab,c.d,-c.abc],c.arcLength,[1,-1],[c.c,-c.d,c.bc,-c.d,c.abc,-c.d],[0,-c.p]),["Z"]]}({width:b,height:w,smoothing:i,radii:y,offsets:u,preserveSmoothing:d})}return L=L.filter((e=>e[0])).map((([e,...t])=>{const r=t.map((e=>Number.isFinite(e)?Number(e.toFixed(h)):e)),n=[e,c?r:r.join(" ")];return c?n:n.join("")})),c?L:L.join("")}e.CornerType=void 0,(r=e.CornerType||(e.CornerType={})).Squircle="squircle",r.FigmaSquircle="figma-squircle",r.Flat="flat",r.Inset="inset",r.Round="round",r.RoundInverse="round-inverse",e.addCorners=function(e,t){n.setCornerOptions(e,t);const r=t=>{const r=n.getDrawOptions(e)??{};if(!r.width||!r.height){const t=e.getBoundingClientRect();r.width=t.width,r.height=t.height}const s={...r,...t};s.isRounded&&(s.width=s.width?Math.round(s.width):void 0,s.height=s.height?Math.round(s.height):void 0),e.style.clipPath=r.clip?`path('${i(s)}')`:"",(r.background||r.border)&&(e.style.backgroundImage=function(e){const{border:t=[],offset:r=0,strokeDrawType:n=0,background:s,clip:o,clipID:a,width:h,height:c}=e,d=[],l=Array.isArray(t?.[0])?t:[t],u=Array.isArray(r)?r:[r,r,r,r],p=o?null:i(e);if(l?.length){let t=0;const a=[];for(let s=0;s<l.length;s++){const[o,h]=l[s],c=0===n?2*(t+o):o;a.push(`<path d="${i({...e,offset:0===n?r:u.map((e=>e+t+.5*o))})}" fill="none" stroke="${h}" stroke-width="${c}" />`),t+=o}s&&(o?d.push(`<rect width="${h}" height="${c}" fill="${s}" />`):d.push(`<path d="${p}" fill="${s}" />`)),d.push(...a.reverse())}return d.length?((e,t,r="c")=>{return`url('data:image/svg+xml,${(e=>encodeURIComponent(e).replace(/%20/g," ").replace(/%3D/g,"=").replace(/%3A/g,":").replace(/%2F/g,"/").replace(/%2C/g,",").replace(/%3B/g,";"))((n=(t?[`<defs><clipPath id="${r}"><path d="${t}" /></clipPath></defs>`,`<g clip-path="url(#${r})">${e.join("")}</g>`]:e).join(""),`<svg xmlns="http://www.w3.org/2000/svg">${n}</svg>`))}')`;var n})(d,p,a):"none"}(s))};return r(),n.addElement(e,t,r)},e.createPath=i,e.draw=function(e,t){n.draw(e,t)},e.unobserve=function(e){n.unobserve(e)},Object.defineProperty(e,"__esModule",{value:!0})}));
