!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).monoco={})}(this,(function(e){"use strict";function t(e,t,i,r,n,o){return e?[["c",...t],i?["a",e,e,0,0,1,...r.map((e=>e*i))]:[],["c",...n]]:[["l",...o]]}var i,r=new class{elements=new Map;constructor(){this.elements=new Map}addElement(e,t,i){this.unobserve(e);const{observe:r=!0,draw:n=!0,onResize:o}=t;if(r){let t=null,r=null;const a=new ResizeObserver((e=>{for(const a of e){const e=a.target.getBoundingClientRect();t===e.width&&r===e.height||(n&&i({width:e.width,height:e.height}),o?.(e,a.target),t=e.width,r=e.height)}}));a.observe(e),this.elements.set(e,{draw:i,element:e,observer:a})}return i}draw(e){e?this.elements.get(e)?.draw?.():this.elements.forEach((e=>e.draw?.()))}unobserve(e){const t=t=>{const i=this.elements.get(t);if(i){const{observer:t}=i;t?.disconnect(),this.elements.delete(e)}};e?t(e):this.elements.forEach((([,e])=>t(e)))}};function n({width:i=0,height:r=0,smoothing:n=1,radius:o=0,offset:a=0,type:s=e.CornerType.Squircle,precision:h=4,isArray:c=!1}){if(!i||!r)return c?[]:"";const d=s===e.CornerType.Squircle,l=Array.isArray(a)?a:[a,a,a,a],[u,f,p,g]=l,m=i-g-f,b=r-u-p,w=.5*Math.min(m,b),y=(Array.isArray(o)?o:[o,o,o,o]).map(((e,t)=>Math.max(0,Math.min(e-l[t],w))));let M;switch(s){case e.CornerType.Round:M=M=function({width:e,height:t,radii:i,offsets:r}){const[n,,,o]=r,[a,s,h,c]=i;return[["M",o+c,n],["L",e-s+o,n],["A",s,s,0,0,1,e+o,n+s],["L",e+o,t-h+n],["A",h,h,0,0,1,e-h+o,t+n],["L",o+c,t+n],["A",c,c,0,0,1,o,t-c+n],["L",o,n+a],["A",a,a,0,0,1,o+a,n],["Z"]]}({width:m,height:b,radii:y,offsets:l});break;case e.CornerType.Flat:M=M=function({width:e,height:t,radii:i,offsets:r}){const[n,,,o]=r,[a,s,h,c]=i;return[["M",o+a,n],["L",e-s+o,n],["L",e+o,n+s],["L",e+o,t-h+n],["L",e-h+o,t+n],["L",o+c,t+n],["L",o,t-c+n],["L",o,n+a],["Z"]]}({width:m,height:b,radii:y,offsets:l});break;case e.CornerType.Squircle:case e.CornerType.FigmaSquircle:default:M=function({width:e,height:i,smoothing:r,radii:n,offsets:o,preserveSmoothing:a}){const[s,,,h]=o,[c,d,l,u]=n.map((t=>function(e,t,i,r){let n=(1+t)*e;i||(t=Math.min(t,r/e-1),n=Math.min(n,r));const o=.5*Math.PI*(1-t),a=Math.sin(o/2)*e*2**.5,s=.25*Math.PI*t,h=e*Math.tan(.25*(.5*Math.PI-o))*Math.cos(s),c=h*Math.tan(s);let d=(n-a-h-c)/3,l=2*d;if(i&&n>r){const e=r-c-a-h,t=e-e/6;d=Math.min(d,t),l=e-d,n=Math.min(n,r)}return{a:l,b:d,c:h,d:c,p:n,arcLength:a,radius:e,ab:l+d,bc:d+h,abc:l+d+h}}(t,r,a,.5*Math.min(e,i))));return[["M",e-d.p+h,s],...t(d.radius,[d.a,0,d.ab,0,d.abc,d.d],d.arcLength,[1,1],[d.d,d.c,d.d,d.bc,d.d,d.abc],[d.p,0]),["L",e+h,i-l.p+s],...t(l.radius,[0,l.a,0,l.ab,-l.d,l.abc],l.arcLength,[-1,1],[-l.c,l.d,-l.bc,l.d,-l.abc,l.d],[0,l.p]),["L",u.p+h,i+s],...t(u.radius,[-u.a,0,-u.ab,0,-u.abc,-u.d],u.arcLength,[-1,-1],[-u.d,-u.c,-u.d,-u.bc,-u.d,-u.abc],[-u.p,0]),["L",h,c.p+s],...t(c.radius,[0,-c.a,0,-c.ab,c.d,-c.abc],c.arcLength,[1,-1],[c.c,-c.d,c.bc,-c.d,c.abc,-c.d],[0,-c.p]),["Z"]]}({width:m,height:b,smoothing:n,radii:y,offsets:l,preserveSmoothing:d})}return M=M.filter((e=>e[0])).map((([e,...t])=>{const i=t.map((e=>Number.isFinite(e)?Number(e.toFixed(h)):e)),r=[e,c?i:i.join(" ")];return c?r:r.join("")})),c?M:M.join("")}e.CornerType=void 0,(i=e.CornerType||(e.CornerType={})).Squircle="squircle",i.FigmaSquircle="figma-squircle",i.Flat="flat",i.Round="round",e.addCorners=function(e,t){const i=i=>{if(!t.width||!t.height){const i=e.getBoundingClientRect();t.width=i.width,t.height=i.height}const r={...t,...i};r.isRounded&&(r.width=r.width?Math.round(r.width):void 0,r.height=r.height?Math.round(r.height):void 0),t.clip&&(e.style.clipPath=`path('${n(r)}')`),(t.color||t.border)&&(e.style.backgroundImage=function(e){const{border:t=[],offset:i=0,strokeDrawType:r=0,color:o,clip:a,clipID:s,width:h,height:c}=e,d=[],l=Array.isArray(t?.[0])?t:[t],u=Array.isArray(i)?i:[i,i,i,i],f=n(e);if(l?.length){let t=0;const s=[];for(let o=0;o<l.length;o++){const[a,h]=l[o],c=0===r?2*(t+a):a;s.push(`<path d="${n({...e,offset:0===r?i:u.map((e=>e+t+.5*a))})}" fill="none" stroke="${h}" stroke-width="${c}" />`),t+=a}o&&(a?d.push(`<rect width="${h}" height="${c}" fill="${o}" />`):d.push(`<path d="${f}" fill="${o}" />`)),d.push(...s.reverse())}return d.length?function(e,t,i="c"){return`url('data:image/svg+xml,${function(e){return encodeURIComponent(e).replace(/%20/g," ").replace(/%3D/g,"=").replace(/%3A/g,":").replace(/%2F/g,"/").replace(/%2C/g,",").replace(/%3B/g,";")}((r=(t?[`<defs><clipPath id="${i}"><path d="${t}" /></clipPath></defs>`,`<g clip-path="url(#${i})">${e.join("")}</g>`]:e).join(""),`<svg xmlns="http://www.w3.org/2000/svg">${r}</svg>`))}')`;var r}(d,f,s):"none"}(r))};return i(),r.addElement(e,t,i)},e.createPath=n,e.draw=function(e){r.draw(e)},e.unobserve=function(e){r.unobserve(e)},Object.defineProperty(e,"__esModule",{value:!0})}));
