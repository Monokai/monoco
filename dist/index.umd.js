!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).monoco={})}(this,(function(e){"use strict";function t(e,t,r,n,i,a){return e?[["c",...t],r?["a",e,e,0,0,1,...n.map((e=>e*r))]:[],["c",...i]]:[["l",...a]]}var r,n=new class{elements=new Map;constructor(){this.elements=new Map}addElement(e,t,r){this.untrack(e);const{track:n=!0,observe:i=!0,draw:a=!0,onResize:o}=t;let s;if(i){let t=null,n=null;s=new ResizeObserver((e=>{for(const i of e){const e=i.target.getBoundingClientRect();t===e.width&&n===e.height||(a&&r({width:e.width,height:e.height}),o?.(e,i.target),t=e.width,n=e.height)}})),s.observe(e)}return n&&this.elements.set(e,{draw:r,element:e,observer:s}),r}draw(e){e?this.elements.get(e)?.draw?.():this.elements.forEach((e=>e.draw?.()))}untrack(e){const t=t=>{const r=this.elements.get(t);if(r){const{observer:t}=r;t?.disconnect(),this.elements.delete(e)}};e?t(e):this.elements.forEach((([,e])=>t(e)))}};function i({width:r=0,height:n=0,smoothing:i=1,radius:a=0,offset:o=0,type:s=e.CornerType.Squircle,precision:c=4,isArray:h=!1}){if(!r||!n)return h?[]:"";const d=s===e.CornerType.Squircle,l=Array.isArray(o)?o:[o,o,o,o],[u,f,p,g]=l,m=r-g-f,b=n-u-p,w=.5*Math.min(m,b),y=(Array.isArray(a)?a:[a,a,a,a]).map(((e,t)=>Math.max(0,Math.min(e-l[t],w))));let M;switch(s){case e.CornerType.Round:M=M=function({width:e,height:t,radii:r,offsets:n}){const[i,,,a]=n,[o,s,c,h]=r;return[["M",a+h,i],["L",e-s+a,i],["A",s,s,0,0,1,e+a,i+s],["L",e+a,t-c+i],["A",c,c,0,0,1,e-c+a,t+i],["L",a+h,t+i],["A",h,h,0,0,1,a,t-h+i],["L",a,i+o],["A",o,o,0,0,1,a+o,i],["Z"]]}({width:m,height:b,radii:y,offsets:l});break;case e.CornerType.Flat:M=M=function({width:e,height:t,radii:r,offsets:n}){const[i,,,a]=n,[o,s,c,h]=r;return[["M",a+o,i],["L",e-s+a,i],["L",e+a,i+s],["L",e+a,t-c+i],["L",e-c+a,t+i],["L",a+h,t+i],["L",a,t-h+i],["L",a,i+o],["Z"]]}({width:m,height:b,radii:y,offsets:l});break;case e.CornerType.Squircle:case e.CornerType.FigmaSquircle:default:M=function({width:e,height:r,smoothing:n,radii:i,offsets:a,preserveSmoothing:o}){const[s,,,c]=a,[h,d,l,u]=i.map((t=>function(e,t,r,n){let i=(1+t)*e;r||(t=Math.min(t,n/e-1),i=Math.min(i,n));const a=.5*Math.PI*(1-t),o=Math.sin(a/2)*e*2**.5,s=.25*Math.PI*t,c=e*Math.tan(.25*(.5*Math.PI-a))*Math.cos(s),h=c*Math.tan(s);let d=(i-o-c-h)/3,l=2*d;if(r&&i>n){const e=n-h-o-c,t=e-e/6;d=Math.min(d,t),l=e-d,i=Math.min(i,n)}return{a:l,b:d,c:c,d:h,p:i,arcLength:o,radius:e,ab:l+d,bc:d+c,abc:l+d+c}}(t,n,o,.5*Math.min(e,r))));return[["M",e-d.p+c,s],...t(d.radius,[d.a,0,d.ab,0,d.abc,d.d],d.arcLength,[1,1],[d.d,d.c,d.d,d.bc,d.d,d.abc],[d.p,0]),["L",e+c,r-l.p+s],...t(l.radius,[0,l.a,0,l.ab,-l.d,l.abc],l.arcLength,[-1,1],[-l.c,l.d,-l.bc,l.d,-l.abc,l.d],[0,l.p]),["L",u.p+c,r+s],...t(u.radius,[-u.a,0,-u.ab,0,-u.abc,-u.d],u.arcLength,[-1,-1],[-u.d,-u.c,-u.d,-u.bc,-u.d,-u.abc],[-u.p,0]),["L",c,h.p+s],...t(h.radius,[0,-h.a,0,-h.ab,h.d,-h.abc],h.arcLength,[1,-1],[h.c,-h.d,h.bc,-h.d,h.abc,-h.d],[0,-h.p]),["Z"]]}({width:m,height:b,smoothing:i,radii:y,offsets:l,preserveSmoothing:d})}return M=M.filter((e=>e[0])).map((([e,...t])=>{const r=t.map((e=>Number.isFinite(e)?Number(e.toFixed(c)):e)),n=[e,h?r:r.join(" ")];return h?n:n.join("")})),h?M:M.join("")}e.CornerType=void 0,(r=e.CornerType||(e.CornerType={})).Squircle="squircle",r.FigmaSquircle="figma-squircle",r.Round="round",r.Flat="flat",e.addCorners=function(e,t){const r=r=>{if(!t.width||!t.height){const r=e.getBoundingClientRect();t.width=r.width,t.height=r.height}const n={...t,...r};n.isRounded&&(n.width=n.width?Math.round(n.width):void 0,n.height=n.height?Math.round(n.height):void 0),t.clip?e.style.clipPath=`path('${i(n)}')`:(t.color||t.border)&&(e.style.backgroundImage=function(e){const{border:t=[],offset:r=0,strokeDrawType:n=0,color:a,clipID:o}=e,s=[],c=Array.isArray(t?.[0])?t:[t],h=Array.isArray(r)?r:[r,r,r,r],d=i(e);if(c?.length){let t=0;const o=[];for(let a=0;a<c.length;a++){const[s,d]=c[a],l=0===n?2*(t+s):s;o.push(`<path d="${i({...e,offset:0===n?r:h.map((e=>e+t+.5*s))})}" fill="none" stroke="${d}" stroke-width="${l}" />`),t+=s}a&&s.push(`<path d="${d}" fill="${a}" />`),s.push(...o.reverse())}return s.length?function(e,t,r="c"){return`url('data:image/svg+xml,${function(e){return encodeURIComponent(e).replace(/%20/g," ").replace(/%3D/g,"=").replace(/%3A/g,":").replace(/%2F/g,"/").replace(/%2C/g,",").replace(/%3B/g,";")}((n=[`<defs><clipPath id="${r}"><path d="${t}" /></clipPath></defs>`,`<g clip-path="url(#${r})">${e.join("")}</g>`].join(""),`<svg xmlns="http://www.w3.org/2000/svg">${n}</svg>`))}')`;var n}(s,d,o):"none"}(n))};return r(),n.addElement(e,t,r)},e.createPath=i,e.draw=function(e){n.draw(e)},e.untrack=function(e){n.untrack(e)},Object.defineProperty(e,"__esModule",{value:!0})}));
