!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).monoco={})}(this,function(t){"use strict";var e=new class{elements;observer;rafID=null;queue=[];resizePrecisionPower=1;constructor(){this.elements=null,this.observer=null}onElementResize(t){this.queue.push(...t),this.rafID||(this.rafID=requestAnimationFrame(()=>this.flushQueue()))}flushQueue(){const t=new Map;for(const e of this.queue)t.set(e.target,e);this.queue=[],t.forEach((t,e)=>{if(!e.isConnected)return void this.unobserve(e);const i=this.elements?.get(e);if(!i)return;let{inlineSize:r,blockSize:n}=t.borderBoxSize[0];i.cornerOptions.isRounded&&(r=Math.round(r),n=Math.round(n));const{previousW:o,previousH:s,draw:h,onResize:a}=i;o===r&&s===n||(h?.({width:r,height:n}),a?.({width:r,height:n},t.target),i.previousW=r,i.previousH=n)}),this.rafID=null}getDrawOptions=t=>this.elements?.get(t)?.cornerOptions??null;setCornerOptions(t,e){const i=this.elements?.get(t);i&&(i.cornerOptions=e,this.elements?.set(t,i))}addElement(t,e,i){this.elements||(this.elements=new Map),this.observer||(this.observer=new ResizeObserver(t=>this.onElementResize(t))),this.unobserve(t);const{observe:r=!0,onResize:n}=e;if(r){const r=null,o=null;this.elements.set(t,{draw:i,cornerOptions:e,onResize:n,previousW:r,previousH:o,element:t}),this.observer.observe(t)}return i}draw(t,e){const run=t=>{if(!t.element.isConnected)return;let{previousW:e,previousH:i}=t;null!==e&&null!==i||(e=t.element.offsetWidth,i=t.element.offsetHeight,t.previousW=e,t.previousH=i),t.draw?.({width:e,height:i})};if(t){e&&this.setCornerOptions(t,e);const i=this.elements?.get(t);i&&run(i)}else this.elements?.forEach(run)}unobserve(t){const funk=t=>{this.observer?.unobserve(t),this.elements?.delete(t)};t?funk(t):this.elements?.keys().forEach(t=>funk(t))}};function createSquircleCorner(t,e,i,r,n,o,s,h){if(i){const h=[];return t&&h.push(["c",...r]),n&&h.push(["a",i,i,0,0,e,...o.map(t=>t*n)]),t&&h.push(["c",...s]),h}return[["l",...h]]}const createPath$6=({width:t,height:e,radii:i,offsets:r,smoothing:n=1,preserveSmoothing:o=!0,sweepFlag:s=1})=>{const[h,,,a]=r,[c,l,u,f]=i.map(i=>function(t,e,i,r){let n=(1+e)*t;i||(e=Math.min(e,r/t-1),n=Math.min(n,r));const o=.5*Math.PI*(1-e),s=Math.sin(o/2)*t*2**.5,h=.25*Math.PI*e,a=t*Math.tan(.25*(.5*Math.PI-o))*Math.cos(h),c=a*Math.tan(h);let l=(n-s-a-c)/3,u=2*l;if(i&&n>r){const t=r-c-s-a,e=t-t/6;l=Math.min(l,e),u=t-l,n=Math.min(n,r)}return{a:u,b:l,c:a,d:c,p:n,arcLength:s,radius:t,ab:u+l,bc:l+a,abc:u+l+a}}(i,n,o,Math.max(i,.5*Math.min(t,e))));return[["M",t-l.p+a,h],...createSquircleCorner(n,s,l.radius,[l.a,0,l.ab,0,l.abc,l.d],l.arcLength,[1,1],[l.d,l.c,l.d,l.bc,l.d,l.abc],[l.p,0]),["L",t+a,e-u.p+h],...createSquircleCorner(n,s,u.radius,[0,u.a,0,u.ab,-u.d,u.abc],u.arcLength,[-1,1],[-u.c,u.d,-u.bc,u.d,-u.abc,u.d],[0,u.p]),["L",f.p+a,e+h],...createSquircleCorner(n,s,f.radius,[-f.a,0,-f.ab,0,-f.abc,-f.d],f.arcLength,[-1,-1],[-f.d,-f.c,-f.d,-f.bc,-f.d,-f.abc],[-f.p,0]),["L",a,c.p+h],...createSquircleCorner(n,s,c.radius,[0,-c.a,0,-c.ab,c.d,-c.abc],c.arcLength,[1,-1],[c.c,-c.d,c.bc,-c.d,c.abc,-c.d],[0,-c.p]),["Z"]]},fix=t=>{const e=10**t;return t=>Math.round(t*e)/e};function createGradient({id:t,angle:e,colors:i,precision:r}){const n=fix(r),o=e*(Math.PI/180),s=Math.sin(o),h=-Math.cos(o),a=(s>=0?1:0)-.5,c=(h>=0?1:0)-.5,l=Math.abs(a*s+c*h);return`<linearGradient id="${t}" x1="${n(.5-l*s)}" y1="${n(.5-l*h)}"  x2="${n(.5+l*s)}" y2="${n(.5+l*h)}" gradientUnits="objectBoundingBox">${function(t,e){const i=fix(e),r=t.map(t=>{const e=t.trim().split(/\s+/),i=e[0];let r=null;if(e.length>1){const t=e[1];r=t.includes("%")?parseFloat(t)/100:parseFloat(t)}return{color:i,val:r}}),n=r.length;null===r[0].val&&(r[0].val=0),null===r[n-1].val&&(r[n-1].val=1);let o=0;for(;o<n-1;){let t=o+1;for(;t<n&&null===r[t].val;)t++;if(t>o+1){const e=r[o].val,i=t-o,n=(r[t].val-e)/i;for(let t=1;t<i;t++)r[o+t].val=e+n*t}o=t}return r.map(t=>`<stop offset="${i(t.val)}" stop-color="${t.color}" />`).join("")}(i,r)}</linearGradient>`}const i=/[\r\n"%#()<>?[\\\]^`{|}\s']/g,r={"\r":"","\n":""};function createPath({width:t=0,height:e=0,borderRadius:i=0,offset:r=0,smoothing:n=1,cornerType:o=createPath$6,precision:s=3,isArray:h=!1}){if(!t||!e)return h?[]:"";const a=Array.isArray(r)?r:[r,r,r,r],[c,l,u,f]=a,d=t-f-l,p=e-c-u;let g,M;if(Array.isArray(i)){const t=i.map((t,e)=>t+i[(e+1)%4]),e=Math.min(...t.map((t,e)=>(e%2==0?d:p)/t));g=e<1?i.map(t=>t*e):i}else g=[i,i,i,i].map((t,e)=>Math.max(0,Math.min(t-a[e],.5*Math.min(d,p))));M=o?o({width:d,height:p,radii:g,offsets:a,smoothing:n}):[[]];const $=fix(s);if(h)return M.filter(t=>t[0]).map(([t,...e])=>[t,...e.map(t=>"number"==typeof t?$(t):t)]);let w="";for(let t=0;t<M.length;t++){const e=M[t];if(e[0]){w+=e[0];for(let t=1;t<e.length;t++){const i=e[t];w+=("number"==typeof i?$(i):i)+" "}}}return w.trim()}t.FigmaSquircle=t=>createPath$6({...t,preserveSmoothing:!1,sweepFlag:1}),t.Flat=({width:t,height:e,radii:i,offsets:r})=>{const[n,,,o]=r,[s,h,a,c]=i;return[["M",o+s,n],["L",t-h+o,n],["L",t+o,n+h],["L",t+o,e-a+n],["L",t-a+o,e+n],["L",o+c,e+n],["L",o,e-c+n],["L",o,n+s],["Z"]]},t.Inset=({width:t,height:e,radii:i,offsets:r})=>{const[n,,,o]=r,[s,h,a,c]=i;return[["M",o+c,n],["L",t-h+o,n],["L",t-h+o,n+h],["L",t+o,n+h],["L",t+o,e-a+n],["L",t-a+o,e-a+n],["L",t-a+o,e+n],["L",o+c,e+n],["L",o+c,e-c+n],["L",o,e-c+n],["L",o,n+s],["L",o+s,n+s],["L",o+s,n],["Z"]]},t.Round=t=>createPath$6({...t,smoothing:0,preserveSmoothing:!1,sweepFlag:1}),t.RoundInverse=t=>createPath$6({...t,smoothing:0,preserveSmoothing:!1,sweepFlag:0}),t.Squircle=createPath$6,t.addCorners=function(t,n){e.setCornerOptions(t,n);const drawFunk=n=>{const o=e.getDrawOptions(t)??{},s={...o,...n};s.isRounded&&(s.width=s.width?Math.round(s.width):void 0,s.height=s.height?Math.round(s.height):void 0),s.width&&s.height&&(t.style.clipPath=o.clip?`path('${createPath(s)}')`:"",(o.background||o.border)&&(t.style.backgroundImage=function(t){const{border:e=[],offset:n=0,strokeDrawType:o=0,background:s,clip:h,idPrefix:a="m",width:c,height:l,precision:u=3}=t,f=[],d=Array.isArray(e?.[0])?e:[e],p=Array.isArray(n)?n:[n,n,n,n],g=h?null:createPath(t);let M;if(d?.length){let e=0;const i=[];for(let r=0;r<d.length;r++)if("number"==typeof d[r][1]){const[s,h,c]=d[r];if(s){const l=`${a}g${r}`;M||(M=[]),M.push(createGradient({id:l,angle:h,colors:c,precision:u}));const f=0===o?2*(e+s):s;i.push(`<path d="${createPath({...t,offset:0===o?n:p.map(t=>t+e+.5*s)})}" fill="none" stroke="url(#${l})" stroke-width="${f}" />`),e+=s}}else{const[s,h]=d[r];if(s){const r=0===o?2*(e+s):s;i.push(`<path d="${createPath({...t,offset:0===o?n:p.map(t=>t+e+.5*s)})}" fill="none" stroke="${h}" stroke-width="${r}" />`),e+=s}}s&&(h?f.push(`<rect width="${c}" height="${l}" fill="${s}" />`):f.push(`<path d="${g}" fill="${s}" />`)),f.push(...i.reverse())}return f.length?(({paths:t,gradients:e,clipPath:n,idPrefix:o})=>{const s=`${o}c`,h=[],a=[];return e&&e.forEach(t=>{h.push(t)}),n&&h.push(`<clipPath id="${s}"><path d="${n}" /></clipPath>`),h.length&&a.push(`<defs>${h.join("")}</defs>`),n?a.push(`<g clip-path="url(#${s})">${t.join("")}</g>`):a.push(...t),`url('data:image/svg+xml,${(t=>t.replace(i,t=>r[t]??(r[t]=`%${t.charCodeAt(0).toString(16).toUpperCase()}`)))((c=a.join(""),`<svg xmlns="http://www.w3.org/2000/svg">${c}</svg>`))}')`;var c})({paths:f,clipPath:g,gradients:M,idPrefix:a}):"none"}(s)))};return drawFunk(),e.addElement(t,n,drawFunk)},t.createPath=createPath,t.draw=function(t,i){e.draw(t,i)},t.unobserve=function(t){e.unobserve(t)},Object.defineProperty(t,"__esModule",{value:!0})});
